{
  "openapi": "3.1.0",
  "info": {
    "title": "Be Ecommerce",
    "version": "1.0",
    "description": "Be API Ecommerce Flattenbot"
  },
  "servers": [
    {"url": "http://localhost:3000/"}
  ],
  "paths": {
    "/users/register": {
      "post": {
        "summary": "User register",
        "description": "Create user account",
        "tags": ["Users", "Auth"],
        "requestBody": {
          "description": "Example form request body",
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "email": {
                    "type": "string"
                  },
                  "name": {
                    "type": "string"
                  },
                  "password": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "success",
            "content": {
              "application/json": {
                "example": {
                  "code": 200,
                  "result": "success",
                  "message": "record has been created",
                  "data": {
                      "id": "01HE34AHXKKDXJHQBRHN5P3J9V",
                      "name": "johndoe1",
                      "email": "johndoe1@gmail.com",
                      "createdAt": "2023-10-31T15:06:09.294Z"
                  }
              }
              }
            }
          },
          "400": {
            "description": "bad request",
            "content": {
              "application/json": {
                "example": {
                  "code": 400,
                  "result": "bad request",
                  "message": {
                    "email": "email field is required",
                    "name": "name cannot less than 5 characters"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/users/login": {
      "post": {
        "summary": "User Login",
        "description": "Retrieve data token user",
        "tags": ["Users", "Auth"],
        "requestBody": {
          "description": "Example form request body",
          "required": true,
          "content": {
            "application/json": {
              "example": {
                "email": "string",
                "password": "string"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "success",
            "content": {
              "application/json": {
                "example": {
                  "code": 200,
                  "result": "success",
                  "message": "login success",
                  "data": {
                    "id": "user id",
                    "name": "user name",
                    "token": "some random token"
                  }
                }
              }
            }
          },
          "403": {
            "description": "forbidden",
            "content": {
              "application/json": {
                "example": {
                  "code": 403,
                  "result": "forbidden",
                  "message": "Email must be verified first!"
                }
              }
            }
          },
          "404": {
            "description": "not found",
            "content": {
              "application/json": {
                "example": {
                  "code": 404,
                  "result": "not found",
                  "message": "cannot retrieve data user"
                }
              }
            }
          },
          "500": {
            "description": "not found",
            "content": {
              "application/json": {
                "example": {
                  "code": 500,
                  "result": "internal server error",
                  "message": "data and hash arguments required"
                }
              }
            }
          }
        }
      }
    },
    "/users/verify": {
      "put": {
        "summary": "Email Verification",
        "description": "Verify email user",
        "tags": ["Auth", "Users"],
        "parameters": [
          {
            "name": "key",
            "in": "query",
            "description": "Key value that identified user id in uuid",
            "required": true,
            "value": "42ffc578-193b-4328-b915-18cfeb050dc"
          }
        ],
        "responses": {
          "200": {
            "description": "success",
            "content": {
              "application/json": {
                "example": {
                  "code": 200,
                  "result": "success",
                  "message": "success verif email"
                }
              }
            }
          },
          "400": {
            "description": "bad request",
            "content": {
              "application/json": {
                "example": {
                  "code": 400,
                  "result": "bad request",
                  "message": "Invalid key or key already expired"
                }
              }
            }
          },
          "500": {
            "description": "internal server error",
            "content": {
              "application/json": {
                "example": {
                  "code": 500,
                  "result": "internal server error",
                  "message": "some message error"
                }
              }
            }
          }
        }
      }
    },
    "/users/details": {
      "get": {
        "summary": "Details User",
        "description": "Get details user, identified by login token",
        "tags": ["Users"],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "success",
            "content": {
              "application/json": {
                "example": {
                  "code": 200,
                  "result": "success",
                  "message": "success get data user",
                  "data": {
                    "id": "some random id",
                    "email": "example@mail.com",
                    "name": "my name",
                    "email_verified": "2023-10-13T05:11:17.034Z",
                    "createdAt": "2023-10-13T05:10:31.633Z",
                    "updatedAt": "2023-10-14T04:51:23.051Z",
                    "deletedAt": null
                  }
                }
              }
            }
          },
          "401": {
            "description": "unauthorized",
            "content": {
              "application/json": {
                "example": {
                  "code": 401,
                  "result": "unauthorized",
                  "message": "token does not provided"
                }
              }
            }
          },
          "403": {
            "description": "forbidden",
            "content": {
              "application/json": {
                "example": {
                  "code": 403,
                  "result": "forbidden",
                  "message": "invalid token or token already expired"
                }
              }
            }
          }
        }
      }
    },
    "/users/update": {
      "put": {
        "summary": "User Update",
        "description": "Update current data user, identified by login token",
        "tags": ["Users"],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "description": "Example form request body",
          "required": true,
          "content": {
            "application/json": {
              "example": {
                "email": "email user",
                "name": "name user"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "success",
            "content": {
              "application/json": {
                "example": {
                  "code": 200,
                  "result": "success",
                  "message": "success update record data",
                  "data": {
                    "id": "01HCRQKDH9WVZY64GKT9QS6B2A",
                    "name": "bastues",
                    "email": "batues@gmail.com",
                    "updatedAt": "2023-10-31T15:22:03.563Z"
                  }
                }
              }
            }
          },
          "400": {
            "description": "bad request",
            "content": {
              "application/json": {
                "example": {
                  "code": 400,
                  "result": "bad request",
                  "message": {
                    "name": "\"name\" is required"
                  }
                }
              }
            }
          },
          "401": {
            "description": "unauthorized",
            "content": {
              "application/json": {
                "example": {
                  "code": 401,
                  "result": "unauthorized",
                  "message": "token does not provided"
                }
              }
            }
          },
          "403": {
            "description": "forbidden",
            "content": {
              "application/json": {
                "example": {
                  "code": 403,
                  "result": "forbidden",
                  "message": "invalid token or token already expired"
                }
              }
            }
          }
        }
      }
    },
    "/admins/create": {
      "post": {
        "summary": "Create admin account",
        "description": "Create new admin or cs account",
        "tags": ["Admins"],
        "requestBody": {
          "description": "Example form request body",
          "required": true,
          "content": {
            "application/json": {
              "example": {
                "email": "admin@mail.com",
                "name": "yourname",
                "password": "password",
                "level": "cs, admin"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "success",
            "content": {
              "application/json": {
                "example": {
                  "code": 200,
                  "result": "success",
                  "message": "record has been created",
                  "data": {
                    "id": 19,
                    "name": "bastus",
                    "email": "bastus@gmail.com",
                    "level": "admin",
                    "createdAt": "2023-10-31T14:44:07.052Z"
                  }
                }
              }
            }
          },
          "400": {
            "description": "bad request",
            "content": {
              "application/json": {
                "example": {
                  "code": 400,
                  "result": "bad request",
                  "message": {
                    "email": "\"email\" is required",
                    "name": "\"name\" is required",
                    "password": "\"password\" is required",
                    "level": "\"level\" is required"
                  }
                }
              }
            }
          },
          "401": {
            "description": "unauthorized",
            "content": {
              "application/json": {
                "example": {
                  "code": 401,
                  "result": "unauthorized",
                  "message": "token does not provided"
                }
              }
            }
          },
          "403": {
            "description": "forbidden",
            "content": {
              "application/json": {
                "example": {
                  "code": 403,
                  "result": "forbidden",
                  "message": "You don't have any permission to use this level"
                }
              }
            }
          },
          "500": {
            "description": "internal server error",
            "content": {
              "application/json": {
                "example": {
                  "code": 500,
                  "result": "internal server error",
                  "message": "some message server error"
                }
              }
            }
          }
        }
      }
    },
    "/admins/login": {
      "post": {
        "summary": "Login admin",
        "description": "Login as cs, admin, superadmin",
        "tags": ["Admins"],
        "requestBody": {
          "description": "Example form request body",
          "required": true,
          "content": {
            "application/json": {
              "example": {
                "name": "admin",
                "password": "yourpassword"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "success",
            "content": {
              "application/json": {
                "example": {
                  "code": 200,
                  "status": "success",
                  "message": "login message",
                  "data": {
                    "id": 1,
                    "name": "admin",
                    "level": "admin",
                    "token": "some random token"
                  }
                }
              }
            }
          },
          "404": {
            "description": "not found",
            "content": {
              "application/json": {
                "example": {
                  "code": 404,
                  "status": "not found",
                  "message": "cannot retrieved data admin"
                }
              }
            }
          },
          "500": {
            "description": "internal server error",
            "content": {
              "application/json": {
                "example": {
                  "code": 500,
                  "result": "internal server error",
                  "message": "some message server error"
                }
              }
            }
          }
        }
      }
    },
    "/stores/create": {
      "post": {
        "summary": "Create store",
        "description": "Create store for use who wants to sell their products",
        "tags": ["Stores"],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "description": "Example form request body",
          "required": true,
          "content": {
            "application/json": {
              "example": {
                "username": "Username for their store, required for slug or etc",
                "name": "Display name for their store",
                "file": "optional, can be skip later",
                "description": "optional, can be skip later"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "success",
            "content": {
              "application/json": {
                "example": {
                  "code": 200,
                  "result": "success",
                  "message": "success created data store",
                  "data": {
                    "user": {
                      "name": "bastues",
                      "email": "batues@gmail.com"
                    },
                    "store": {
                      "id": 47,
                      "username": "store12",
                      "name": "My first store",
                      "photos": null,
                      "description": null,
                      "createdAt": "2023-10-31T23:24:59.079Z"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "bad request",
            "content": {
              "application/json": {
                "example": {
                  "code": 400,
                  "result": "bad request",
                  "message": "this already has store exist"
                }
              }
            }
          },
          "401": {
            "description": "unauthorized",
            "content": {
              "application/json": {
                "example": {
                  "code": 401,
                  "result": "unauthorized",
                  "message": "token does not provided"
                }
              }
            }
          },
          "403": {
            "description": "forbidden",
            "content": {
              "application/json": {
                "example": {
                  "code": 403,
                  "result": "forbidden",
                  "message": "invalid token or token already expired"
                }
              }
            }
          },
          "500": {
            "description": "internal server error",
            "content": {
              "application/json": {
                "example": {
                  "code": 500,
                  "result": "internal server error",
                  "message": "some message server error"
                }
              }
            }
          }
        }
      }
    },
    "/stores/update": {
      "put": {
        "summary": "Update store",
        "description": "Update their own store",
        "tags": ["Stores"],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "description": "Example form request body",
          "required": true,
          "content": {
            "application/json": {
              "example": {
                
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "success",
            "content": {
              "application/json": {
                "example": {
                  "code": 200,
                  "result": "success",
                  "message": "success update record data",
                  "data": {
                    "user": {
                      "name": "bastues",
                      "email": "batues@gmail.com"
                    },
                    "store": {
                      "id": 64,
                      "username": "mystore",
                      "name": "Digital Store 1",
                      "photos": "01HCRQKDH9WVZY64GKT9QS6B2A.jpeg",
                      "description": "Adalah sebuah toko digital murah terpecaya",
                      "updatedAt": "2023-11-01T14:09:43.908Z"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "bad request",
            "content": {
              "application/json": {
                "example": {
                  "code": 400,
                  "result": "bad request",
                  "message": "Username store already taken"
                }
              }
            }
          },
          "401": {
            "description": "unauthorized",
            "content": {
              "application/json": {
                "example": {
                  "code": 401,
                  "result": "unauthorized",
                  "message": "token does not provided"
                }
              }
            }
          },
          "403": {
            "description": "forbidden",
            "content": {
              "application/json": {
                "example": {
                  "code": 403,
                  "result": "forbidden",
                  "message": "invalid token or token already expired"
                }
              }
            }
          },
          "404": {
            "description": "not found",
            "content": {
              "application/json": {
                "example": {
                  "code": 404,
                  "result": "not found",
                  "message": "Record to update not found"
                }
              }
            }
          },
          "500": {
            "description": "internal server error",
            "content": {
              "application/json": {
                "example": {
                  "code": 500,
                  "result": "internal server error",
                  "message": "some message server error"
                }
              }
            }
          }
        }
      }
    },
    "/categories": {
      "get": {
        "summary": "Get Categories",
        "description": "Get all available categories",
        "tags": ["Categories"],
        "responses": {
          "200": {
            "description": "success",
            "content": {
              "application/json": {
                "example": {
                  "code": 200,
                  "result": "success",
                  "message": "success get record data",
                  "data": [
                    {
                      "id": 1,
                      "name": "Elektronik",
                      "slug": "elektronik",
                      "createdAt": "2023-11-17T02:17:45.932Z",
                      "updatedAt": "2023-11-17T02:17:45.932Z"
                    },
                    {
                      "id": 3,
                      "name": "Fashion",
                      "slug": "fashion",
                      "createdAt": "2023-11-17T02:18:33.858Z",
                      "updatedAt": "2023-11-17T02:18:33.858Z"
                    }
                  ]
                }
              }
            }
          },
          "500": {
            "description": "internal server error",
            "content": {
              "application/json": {
                "example": {
                  "code": 500,
                  "result": "internal server error",
                  "message": "some message server error"
                }
              }
            }
          }
        }
      }
    },
    "/categories/create": {
      "post": {
        "summary": "Create category",
        "description": "Create category of products",
        "tags": ["Categories"],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "description": "Example form request body",
          "required": true,
          "content": {
            "application/json": {
              "example": {
                "name": "required, name for category product"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "success",
            "content": {
              "application/json": {
                "example": {
                  "code": 200,
                  "result": "success",
                  "message": "record has been created",
                  "data": {
                    "id": 5,
                    "name": "Phone",
                    "createdAt": "2023-11-13T08:59:22.254Z",
                    "updatedAt": "2023-11-13T08:59:22.254Z",
                    "deletedAt": null
                  }
                }
              }
            }
          },
          "400": {
            "description": "bad request",
            "content": {
              "application/json": {
                "example": {
                  "code": 400,
                  "result": "bad request",
                  "message": "Category name already taken"
                }
              }
            }
          },
          "401": {
            "description": "unauthorized",
            "content": {
              "application/json": {
                "example": {
                  "code": 401,
                  "result": "unauthorized",
                  "message": "token does not provided"
                }
              }
            }
          },
          "403": {
            "description": "forbidden",
            "content": {
              "application/json": {
                "example": {
                  "code": 403,
                  "result": "forbidden",
                  "message": "invalid token or token already expired"
                }
              }
            }
          },
          "500": {
            "description": "internal server error",
            "content": {
              "application/json": {
                "example": {
                  "code": 500,
                  "result": "internal server error",
                  "message": "some message server error"
                }
              }
            }
          }
        }
      }
    },
    "/products": {
      "get": {
        "summary": "Get All products",
        "description": "Get all available products",
        "tags": ["Products"],
        "parameters": [
          {
            "name": "take",
            "in": "query",
            "description": "Get total data products, default 10",
            "required": false,
            "example": 5
          },
          {
            "name": "page",
            "in": "query",
            "description": "display current pagination of products, default 0",
            "required": false,
            "example": 2
          }
        ],
        "responses": {
          "200": {
            "description": "success",
            "content": {
              "application/json": {
                "example": {
                  "code": 200,
                  "result": "success",
                  "message": "success get record data",
                  "data": [
                    {
                      "id": 125,
                      "name": "Refined Steel Chips",
                      "slug": "refined-steel chips-1700398918822",
                      "price": 478287,
                      "image": "http://localhost:3000/images/products/clock-store-refined-steel-chips-1700398918824-1.jpeg"
                    },
                    {
                      "id": 126,
                      "name": "Incredible Frozen Ball",
                      "slug": "incredible-frozen ball-1700398918940",
                      "price": 407679,
                      "image": "http://localhost:3000/images/products/fa-torphy-incredible-frozen-ball-1700398918941-1.jpeg"
                    }
                  ]
                }
              }
            }
          },
          "404": {
            "description": "not found",
            "content": {
              "application/json": {
                "example": {
                  "code": 404,
                  "result": "not found",
                  "message": "record data not found"
                }
              }
            }
          },
          "500": {
            "description": "internal server error",
            "content": {
              "application/json": {
                "example": {
                  "code": 500,
                  "result": "internal server error",
                  "message": "some message server error"
                }
              }
            }
          }
        }
      }
    },
    "/products/create": {
      "post": {
        "summary": "Create Product",
        "description": "Create product store",
        "tags": ["Products"],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "description": "Example form request body",
          "content": {
            "application/json": {
              "example": {
                "code": 200,
                "result": "success",
                "message": "record has been created",
                "data": {
                  "store_id": 1,
                  "category_id": 3,
                  "name": "Underwear",
                  "slug": "mystore-Underwear-1700466471189",
                  "description": "Sell angel chan underwear",
                  "price": 25000,
                  "stock": 2,
                  "images": [
                    {
                      "product_id": 158,
                      "name": "mystore-underwear-1700466471187-1.jpeg"
                    }
                  ]
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "success",
            "content": {
              "application/json": {
                "example": {
                  "code": 200,
                  "result": "success",
                  "message": "record has been created",
                  "data": {
                    "id": 1,
                    "store_id": 1,
                    "category_id": 1,
                    "name": "Jam Tangan",
                    "slug": "rhino-official-jam-tangan-1700202563475",
                    "description": "Jam tangan bagus",
                    "price": 150000,
                    "stock": 329,
                    "createdAt": "2023-11-17T06:29:23.477Z",
                    "updatedAt": "2023-11-17T06:29:23.477Z",
                    "deletedAt": null
                  }
                }
              }
            }
          },
          "400": {
            "description": "bad request",
            "content": {
              "application/json": {
                "example": {
                  "code": 400,
                  "result": "bad request",
                  "message": "Category doesn't exist"
                }
              }
            }
          },
          "401": {
            "description": "unauthorized",
            "content": {
              "application/json": {
                "example": {
                  "code": 401,
                  "result": "unauthorized",
                  "message": "token does not provided"
                }
              }
            }
          },
          "403": {
            "description": "forbidden",
            "content": {
              "application/json": {
                "example": {
                  "code": 403,
                  "result": "forbidden",
                  "message": "invalid token or token already expired"
                }
              }
            }
          },
          "500": {
            "description": "internal server error",
            "content": {
              "application/json": {
                "example": {
                  "code": 500,
                  "result": "internal server error",
                  "message": "some message server error"
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "securitySchemes": {
      "bearerAuth": {
        "type": "http",
        "scheme": "bearer",
        "bearerFormat": "JWT"
      }
    }
  }
}